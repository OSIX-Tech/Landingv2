---
const { 
  title, 
  category, 
  imageUrl, 
  projectUrl, 
  description,
  technologies = [],
  client
} = Astro.props;

// Cambiar los colores a tonos rojizos para todas las categorías
function getCategoryColor(category) {
  const categories = {
    'Diseño Web': 'from-[#CD1C18] to-[#A51713]',
    'Desarrollo Web': 'from-[#CD1C18] to-[#A51713]',
    'Aplicación Web': 'from-[#CD1C18] to-[#A51713]',
    'Landing Page': 'from-[#CD1C18] to-[#A51713]',
    'Rediseño': 'from-[#CD1C18] to-[#A51713]',
    'Dashboard': 'from-[#CD1C18] to-[#A51713]',
    'Branding': 'from-[#CD1C18] to-[#A51713]'
  };
  
  return categories[category] || 'from-[#CD1C18] to-[#A51713]';
}

const gradientClass = getCategoryColor(category);
---

<div class="group relative overflow-hidden rounded-xl bg-[#1A1A1A] shadow hover:shadow-xl transition-all duration-300 border border-[#2a2a2a] hover:border-[#CD1C18]/40 flex flex-col h-full transform hover:-translate-y-1">
  <!-- Imagen con efecto hover -->
  <div class="overflow-hidden relative">
    <img 
      src={imageUrl} 
      alt={title} 
      class="w-full h-52 object-cover object-top transition-all duration-500 ease-in-out filter grayscale group-hover:grayscale-0 group-hover:scale-105"
    />
    
    <!-- Overlay con información rápida -->
    <div class="absolute inset-0 flex flex-col justify-end p-5 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
      <h3 class="text-white font-bold text-lg mb-1 transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300">{title}</h3>
      {client && (
        <p class="text-white/80 text-sm transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300 delay-75">
          Cliente: {client}
        </p>
      )}
    </div>
    
    <!-- Categoría flotante -->
    <div class="absolute top-4 right-4">
      <span class={`px-3 py-1.5 text-white text-sm font-medium rounded-lg shadow-sm bg-gradient-to-r ${gradientClass}`}>
        {category}
      </span>
    </div>
    
    <!-- Flecha indicadora de interactividad -->
    <div class="absolute top-1/2 right-4 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg opacity-0 group-hover:opacity-90 transition-all duration-300 translate-x-4 group-hover:translate-x-0">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-[#CD1C18]" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
      </svg>
    </div>
  </div>

  <!-- Contenido de la tarjeta -->
  <div class="p-5 flex-grow flex flex-col">
    <!-- Título y categoría -->
    <div class="mb-3 flex items-start justify-between">
      <div>
        <h3 class="text-lg font-bold text-white mb-1 group-hover:text-[#CD1C18] transition-colors">{title}</h3>
        <span class="inline-flex items-center text-sm font-medium text-[#CD1C18]">
          {category}
        </span>
      </div>
      
      <!-- Insignia con ícono relacionado con la categoría -->
      <div class={`flex-shrink-0 p-2 rounded-lg bg-gradient-to-br ${gradientClass}`}>
        {category === 'Diseño Web' && (
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
        )}
        {category === 'Desarrollo Web' && (
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
          </svg>
        )}
        {category === 'Aplicación Web' && (
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
          </svg>
        )}
        {(category !== 'Diseño Web' && category !== 'Desarrollo Web' && category !== 'Aplicación Web') && (
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
          </svg>
        )}
      </div>
    </div>
    
    <!-- Descripción -->
    {description && (
      <p class="text-gray-300 text-sm mb-4 line-clamp-2">{description}</p>
    )}
    
    <!-- Tecnologías en forma de chips -->
    {technologies.length > 0 && (
      <div class="flex flex-wrap gap-1.5 mt-auto">
        {technologies.map((tech) => (
          <span class="inline-block px-2 py-1 text-xs font-medium rounded-full bg-[#CD1C18]/10 text-[#CD1C18] border border-[#CD1C18]/30">
            {tech}
          </span>
        ))}
      </div>
    )}
    
    <!-- Botón de "Ver Proyecto" -->
    <a 
      href={projectUrl} 
      class="inline-flex items-center justify-center mt-4 w-full py-2.5 px-4 border border-[#CD1C18] group-hover:border-[#CD1C18]/70 rounded-lg transition-colors duration-300 text-gray-200 hover:text-white hover:bg-[#CD1C18] font-medium"
      target="_blank"
      rel="noopener noreferrer"
    >
      Ver Proyecto
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2 transform transition-transform duration-300 group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
      </svg>
    </a>
  </div>
  
  <!-- Esquina decorativa -->
  <div class="absolute top-0 right-0 w-14 h-14 overflow-hidden pointer-events-none">
    <div class={`absolute transform rotate-45 bg-gradient-to-r ${gradientClass} w-20 h-20 -top-10 -right-10 opacity-20`}></div>
  </div>
</div>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>