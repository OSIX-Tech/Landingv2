---
const { lang } = Astro.params;
const translations = await import(`../../public/locales/${lang}.json`);
const t = (k: string) => translations.default[k] || k;
---

<section id="home" class="relative w-full min-h-screen flex flex-col items-center justify-start pt-20 overflow-hidden">
  <div class="absolute top-18 md:top-20 left-1/2 transform -translate-x-1/2 !text-black text-center z-10">
    <h1 class="text-2xl sm:text-3xl md:text-4xl font-medium whitespace-nowrap">{t('hero.title.line1')}</p>
    <h1 class="text-2xl sm:text-3xl md:text-4xl font-medium mt-1 md:mt-2 whitespace-nowrap">{t('hero.title.line2')}</p>
  </div>
  <!-- Background video -->
  <video
    autoplay
    muted
    loop
    playsinline
    preload="auto"
    poster="/hero.jpg" 
    class="absolute inset-0 w-full h-full object-cover z-0"
    x-webkit-airplay="allow"
    webkit-playsinline="true"
    playsinline="true"
  >
    <source src="/hero_video_60fps.webm" type="video/webm" />
    <source src="/hero_video_60fps.mp4" type="video/mp4" />
    Your browser does not support the video tag.
  </video>

  <!-- Center headline & logo -->
  <div id="hero-logo-container" class="absolute bottom-32 md:bottom-28 left-1/2 transform -translate-x-1/2 z-10 transition-opacity duration-500">
    <img
      src="/full_logo.png"
      alt="OSIX"
      class="w-36 sm:w-40 md:w-44 lg:w-48 h-auto"
    />
  </div>
  <div class="absolute bottom-0 left-0 w-full pointer-events-none z-10"></div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const video = document.querySelector('video');
    if (video) {
      // Force play on iOS
      video.play().catch(function(error) {
        console.log("Video autoplay failed:", error);
      });
    }
  });
</script>